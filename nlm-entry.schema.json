{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "NLMEntry",
  "type": "object",
  "required": ["id", "service", "operation", "namespace", "version"],
  "properties": {
    "id": {
      "type": "string",
      "description": "Canonical ID: <service>.<operation>.<namespace>.<version>"
    },
    "service": { "type": "string", "description": "High-level service name (e.g., obinexus.geo)" },
    "operation": { "type": "string", "description": "Operation name (e.g., nearby)" },
    "version": { "type": "string", "description": "Semantic version or API version (e.g., v1)" },
    "namespace": { "type": "string", "description": "Namespaced owner/department (e.g., department.division.country)" },
    "capabilities": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Capability tags for capability-based discovery"
    },
    "openapi_url": { "type": "string", "format": "uri", "description": "OpenAPI/GraphQL schema location" },
    "dns_aliases": {
      "type": "array",
      "items": { "type": "string" },
      "description": "Auto-provisioned or manual FQDN aliases (optional)"
    },
    "endpoints": {
      "type": "array",
      "items": {
        "type": "object",
        "required": ["url", "region"],
        "properties": {
          "url": { "type": "string", "format": "uri" },
          "region": { "type": "string" },
          "priority": { "type": "integer", "default": 100 },
          "health_score": { "type": "integer", "minimum": -1, "maximum": 12, "description": "Numeric health/severity score" }
        }
      }
    },
    "meta": { "type": "object", "additionalProperties": true }
  },
  "additionalProperties": false
}
